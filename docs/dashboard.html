<!DOCTYPE html>
<html lang="en" class="">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArchPulse Architecture | ArchPulse</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèóÔ∏è</text></svg>">
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    /* ========== CSS Variables & Theme ========== */
    :root {
      --bg-primary: #0f0f23;
      --bg-secondary: #1a1a2e;
      --bg-card: rgba(26, 26, 46, 0.8);
      --bg-card-hover: rgba(26, 26, 46, 0.95);
      --text-primary: #ffffff;
      --text-secondary: #a1a1aa;
      --text-muted: #71717a;
      --border-color: rgba(255, 255, 255, 0.1);
      --accent-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
      --accent-primary: #8b5cf6;
      --accent-secondary: #6366f1;
      --success: #22c55e;
      --success-bg: rgba(34, 197, 94, 0.1);
      --warning: #f59e0b;
      --warning-bg: rgba(245, 158, 11, 0.1);
      --danger: #ef4444;
      --danger-bg: rgba(239, 68, 68, 0.1);
      --info: #3b82f6;
      --info-bg: rgba(59, 130, 246, 0.1);
      --glow-primary: 0 0 40px rgba(139, 92, 246, 0.3);
      --glow-success: 0 0 40px rgba(34, 197, 94, 0.3);
      --glow-warning: 0 0 40px rgba(245, 158, 11, 0.3);
      --glow-danger: 0 0 40px rgba(239, 68, 68, 0.3);
    }

    html.light {
      --bg-primary: #fafafa;
      --bg-secondary: #ffffff;
      --bg-card: rgba(255, 255, 255, 0.9);
      --bg-card-hover: rgba(255, 255, 255, 1);
      --text-primary: #18181b;
      --text-secondary: #52525b;
      --text-muted: #a1a1aa;
      --border-color: rgba(0, 0, 0, 0.08);
    }

    /* ========== Reset & Base ========== */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ========== Background Effects ========== */
    .bg-effects {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }

    .bg-blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.4;
      animation: float 20s ease-in-out infinite;
    }

    .bg-blob-1 {
      width: 600px;
      height: 600px;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      top: -200px;
      right: -200px;
      animation-delay: 0s;
    }

    .bg-blob-2 {
      width: 500px;
      height: 500px;
      background: linear-gradient(135deg, #d946ef, #8b5cf6);
      bottom: -150px;
      left: -150px;
      animation-delay: -7s;
    }

    .bg-blob-3 {
      width: 400px;
      height: 400px;
      background: linear-gradient(135deg, #22c55e, #3b82f6);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation-delay: -14s;
      opacity: 0.2;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(30px, -30px) scale(1.05); }
      66% { transform: translate(-20px, 20px) scale(0.95); }
    }

    /* ========== Layout ========== */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
      position: relative;
      z-index: 1;
    }

    /* ========== Header ========== */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
      padding-bottom: 24px;
      border-bottom: 1px solid var(--border-color);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-icon {
      width: 48px;
      height: 48px;
      background: var(--accent-gradient);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: var(--glow-primary);
    }

    .logo-text h1 {
      font-size: 1.5rem;
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo-text p {
      font-size: 0.875rem;
      color: var(--text-muted);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .theme-toggle {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      border: 1px solid var(--border-color);
      background: var(--bg-card);
      color: var(--text-primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.2s ease;
    }

    .theme-toggle:hover {
      background: var(--bg-card-hover);
      border-color: var(--accent-primary);
    }

    .timestamp {
      font-size: 0.875rem;
      color: var(--text-muted);
      padding: 8px 16px;
      background: var(--bg-card);
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    /* ========== Grid System ========== */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 24px;
    }

    .col-3 { grid-column: span 3; }
    .col-4 { grid-column: span 4; }
    .col-6 { grid-column: span 6; }
    .col-8 { grid-column: span 8; }
    .col-12 { grid-column: span 12; }

    @media (max-width: 1200px) {
      .col-3, .col-4 { grid-column: span 6; }
      .col-8 { grid-column: span 12; }
    }

    @media (max-width: 768px) {
      .col-3, .col-4, .col-6 { grid-column: span 12; }
    }

    /* ========== Cards ========== */
    .card {
      background: var(--bg-card);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 24px;
      transition: all 0.3s ease;
    }

    .card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-2px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .card-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .card-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .card-badge {
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 6px;
      font-weight: 500;
    }

    /* ========== Health Score Card ========== */
    .health-card {
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .health-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
      opacity: 0.05;
      animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .score-ring {
      position: relative;
      width: 180px;
      height: 180px;
      margin: 20px auto;
    }

    .score-ring svg {
      transform: rotate(-90deg);
      width: 100%;
      height: 100%;
    }

    .score-ring-bg {
      fill: none;
      stroke: var(--border-color);
      stroke-width: 12;
    }

    .score-ring-progress {
      fill: none;
      stroke: url(#scoreGradient);
      stroke-width: 12;
      stroke-linecap: round;
      stroke-dasharray: 439.822971502571;
      stroke-dashoffset: 35.18583772020566;
      transition: stroke-dashoffset 1.5s ease-out;
    }

    .score-content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .score-grade {
      font-size: 3.5rem;
      font-weight: 800;
      background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1;
    }

    .score-value {
      font-size: 1rem;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .health-status {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: 30px;
      font-size: 0.875rem;
      font-weight: 600;
      background: rgba(34, 197, 94, 0.1);
      color: #22c55e;
      margin-top: 16px;
    }

    .health-status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: currentColor;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }

    /* ========== Stat Cards ========== */
    .stat-card {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .stat-value {
      font-size: 2.5rem;
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-label {
      font-size: 0.875rem;
      color: var(--text-muted);
    }

    .stat-trend {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.875rem;
      padding: 4px 10px;
      border-radius: 6px;
      width: fit-content;
    }

    .stat-trend.positive {
      background: var(--success-bg);
      color: var(--success);
    }

    .stat-trend.negative {
      background: var(--danger-bg);
      color: var(--danger);
    }

    .stat-trend.neutral {
      background: var(--info-bg);
      color: var(--info);
    }

    /* ========== Layer Distribution ========== */
    .layer-chart-container {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .layer-chart {
      flex: 1;
      max-width: 200px;
      aspect-ratio: 1;
    }

    .layer-legend {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .layer-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .layer-item:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: var(--accent-primary);
      transform: translateX(4px);
    }

    .layer-dot {
      width: 12px;
      height: 12px;
      border-radius: 4px;
      flex-shrink: 0;
    }

    .layer-info {
      flex: 1;
      min-width: 0;
    }

    .layer-name {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .layer-count {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .layer-bar {
      width: 60px;
      height: 6px;
      background: var(--border-color);
      border-radius: 3px;
      overflow: hidden;
    }

    .layer-bar-fill {
      height: 100%;
      border-radius: 3px;
      transition: width 0.5s ease;
    }

    /* ========== Top Modules ========== */
    .modules-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .module-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      transition: all 0.2s ease;
    }

    .module-item:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: var(--accent-primary);
    }

    .module-rank {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      background: var(--accent-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      color: white;
    }

    .module-info {
      flex: 1;
      min-width: 0;
    }

    .module-name {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .module-path {
      font-size: 0.75rem;
      color: var(--text-muted);
      font-family: 'JetBrains Mono', monospace;
    }

    .module-deps {
      text-align: right;
    }

    .module-deps-value {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .module-deps-label {
      font-size: 0.7rem;
      color: var(--text-muted);
      text-transform: uppercase;
    }

    /* ========== Recommendations ========== */
    .recommendations-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .recommendation-item {
      display: flex;
      align-items: flex-start;
      gap: 14px;
      padding: 16px;
      border-radius: 12px;
      border-left: 3px solid;
      transition: all 0.2s ease;
    }

    .recommendation-item.critical {
      background: var(--danger-bg);
      border-color: var(--danger);
    }

    .recommendation-item.warning {
      background: var(--warning-bg);
      border-color: var(--warning);
    }

    .recommendation-item.info {
      background: var(--info-bg);
      border-color: var(--info);
    }

    .recommendation-icon {
      width: 24px;
      height: 24px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-size: 14px;
    }

    .recommendation-text {
      font-size: 0.875rem;
      color: var(--text-primary);
      line-height: 1.5;
    }

    /* ========== Circular Dependencies ========== */
    .circular-deps-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .circular-dep-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: var(--danger-bg);
      border: 1px solid rgba(239, 68, 68, 0.2);
      border-radius: 10px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--text-secondary);
      overflow-x: auto;
    }

    .circular-dep-arrow {
      color: var(--danger);
      flex-shrink: 0;
    }

    .circular-dep-node {
      padding: 2px 8px;
      background: rgba(239, 68, 68, 0.15);
      border-radius: 4px;
      white-space: nowrap;
    }

    /* ========== Diagram Card ========== */
    .diagram-card {
      overflow: hidden;
    }

    .graph-container {
      background: linear-gradient(135deg, rgba(15, 15, 35, 0.95) 0%, rgba(30, 30, 60, 0.95) 100%);
      border-radius: 16px;
      padding: 0;
      position: relative;
      overflow: hidden;
      min-height: 500px;
    }

    .graph-svg {
      width: 100%;
      height: 500px;
      display: block;
    }

    .graph-controls {
      position: absolute;
      top: 16px;
      right: 16px;
      display: flex;
      gap: 8px;
      z-index: 10;
    }

    .graph-btn {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      background: var(--bg-card);
      color: var(--text-primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      transition: all 0.2s ease;
    }

    .graph-btn:hover {
      background: var(--accent-primary);
      border-color: var(--accent-primary);
    }

    .graph-legend {
      position: absolute;
      bottom: 16px;
      left: 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      z-index: 10;
    }

    .graph-legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.75rem;
      color: var(--text-muted);
      background: rgba(0, 0, 0, 0.4);
      padding: 6px 10px;
      border-radius: 6px;
    }

    .graph-legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 3px;
    }

    .node-label {
      font-size: 11px;
      font-weight: 500;
      fill: var(--text-primary);
      text-anchor: middle;
      pointer-events: none;
    }

    .link {
      stroke: rgba(139, 92, 246, 0.3);
      stroke-width: 1.5;
      fill: none;
    }

    .link:hover {
      stroke: rgba(139, 92, 246, 0.8);
      stroke-width: 2;
    }

    /* ========== Footer ========== */
    .footer {
      margin-top: 48px;
      padding-top: 24px;
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
    }

    .footer-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    .footer-brand a {
      color: var(--accent-primary);
      text-decoration: none;
      font-weight: 500;
    }

    .footer-brand a:hover {
      text-decoration: underline;
    }

    .footer-links {
      display: flex;
      gap: 24px;
    }

    .footer-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.875rem;
      transition: color 0.2s ease;
    }

    .footer-links a:hover {
      color: var(--accent-primary);
    }

    /* ========== Empty State ========== */
    .empty-state {
      text-align: center;
      padding: 32px;
      color: var(--text-muted);
    }

    .empty-state-icon {
      font-size: 2rem;
      margin-bottom: 12px;
      opacity: 0.5;
    }

    /* ========== Scrollbar ========== */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-muted);
    }

    /* ========== Animation Classes ========== */
    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .stagger-1 { animation-delay: 0.1s; opacity: 0; }
    .stagger-2 { animation-delay: 0.2s; opacity: 0; }
    .stagger-3 { animation-delay: 0.3s; opacity: 0; }
    .stagger-4 { animation-delay: 0.4s; opacity: 0; }
    .stagger-5 { animation-delay: 0.5s; opacity: 0; }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Background Effects -->
  <div class="bg-effects">
    <div class="bg-blob bg-blob-1"></div>
    <div class="bg-blob bg-blob-2"></div>
    <div class="bg-blob bg-blob-3"></div>
  </div>

  <div class="container">
    <!-- Header -->
    <header class="header fade-in">
      <div class="logo">
        <div class="logo-icon">üèóÔ∏è</div>
        <div class="logo-text">
          <h1>ArchPulse Architecture</h1>
          <p>Architecture Analysis Report</p>
        </div>
      </div>
      <div class="header-actions">
        <span class="timestamp">üìÖ January 19, 2026 at 09:39 PM</span>
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
          <span id="themeIcon">üåô</span>
        </button>
      </div>
    </header>

    <!-- Dashboard Grid -->
    <div class="dashboard-grid">
      
      <!-- Health Score Card -->
      <div class="col-3 card health-card fade-in stagger-1">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: rgba(34, 197, 94, 0.1); color: #22c55e">‚ù§Ô∏è</span>
            Health Score
          </div>
        </div>
        <div class="score-ring">
          <svg viewBox="0 0 160 160">
            <defs>
              <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color: #22c55e" />
                <stop offset="100%" style="stop-color: #10b981" />
              </linearGradient>
            </defs>
            <circle class="score-ring-bg" cx="80" cy="80" r="70" />
            <circle class="score-ring-progress" cx="80" cy="80" r="70" />
          </svg>
          <div class="score-content">
            <div class="score-grade">A</div>
            <div class="score-value">92/100</div>
          </div>
        </div>
        <div class="health-status">
          <span class="health-status-dot"></span>
          Healthy
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="col-3 card stat-card fade-in stagger-2">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: var(--info-bg); color: var(--info)">üìÅ</span>
            Files Analyzed
          </div>
        </div>
        <div class="stat-value">46</div>
        <div class="stat-label">source files scanned</div>
        <div class="stat-trend neutral">
          <span>üìä</span> Complete scan
        </div>
      </div>

      <div class="col-3 card stat-card fade-in stagger-3">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: var(--accent-primary); background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2)); color: var(--accent-primary)">üîó</span>
            Dependencies
          </div>
        </div>
        <div class="stat-value">94</div>
        <div class="stat-label">import connections found</div>
        <div class="stat-trend positive">
          <span>‚úÖ</span>
          2.0 deps/file
        </div>
      </div>

      <div class="col-3 card stat-card fade-in stagger-4">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: var(--danger-bg); color: var(--danger)">üîÑ</span>
            Circular Deps
          </div>
        </div>
        <div class="stat-value" style="background: linear-gradient(135deg, #ef4444, #f97316); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">1</div>
        <div class="stat-label">circular dependency chains</div>
        <div class="stat-trend neutral">
          <span>‚ö°</span>
          Minor issues
        </div>
      </div>

      <!-- Layer Distribution -->
      <div class="col-6 card fade-in stagger-5">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: linear-gradient(135deg, rgba(217, 70, 239, 0.2), rgba(139, 92, 246, 0.2)); color: #d946ef">üìä</span>
            Architecture Layers
          </div>
          <span class="card-badge" style="background: var(--accent-primary); background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2)); color: var(--accent-primary)">7 layers</span>
        </div>
        <div class="layer-chart-container">
          <div class="layer-chart">
            <canvas id="layerChart"></canvas>
          </div>
          <div class="layer-legend">
            
              <div class="layer-item">
                <div class="layer-dot" style="background: #2ecc71"></div>
                <div class="layer-info">
                  <div class="layer-name">Cli</div>
                  <div class="layer-count">3 modules</div>
                </div>
                <div class="layer-bar">
                  <div class="layer-bar-fill" style="width: 14%; background: #2ecc71"></div>
                </div>
              </div>
              <div class="layer-item">
                <div class="layer-dot" style="background: #bdc3c7"></div>
                <div class="layer-info">
                  <div class="layer-name">Root</div>
                  <div class="layer-count">1 modules</div>
                </div>
                <div class="layer-bar">
                  <div class="layer-bar-fill" style="width: 4%; background: #bdc3c7"></div>
                </div>
              </div>
              <div class="layer-item">
                <div class="layer-dot" style="background: #bdc3c7"></div>
                <div class="layer-info">
                  <div class="layer-name">Vscode Extension</div>
                  <div class="layer-count">8 modules</div>
                </div>
                <div class="layer-bar">
                  <div class="layer-bar-fill" style="width: 34%; background: #bdc3c7"></div>
                </div>
              </div>
              <div class="layer-item">
                <div class="layer-dot" style="background: #bdc3c7"></div>
                <div class="layer-info">
                  <div class="layer-name">Src</div>
                  <div class="layer-count">31 modules</div>
                </div>
                <div class="layer-bar">
                  <div class="layer-bar-fill" style="width: 100%; background: #bdc3c7"></div>
                </div>
              </div>
              <div class="layer-item">
                <div class="layer-dot" style="background: #95a5a6"></div>
                <div class="layer-info">
                  <div class="layer-name">Config</div>
                  <div class="layer-count">1 modules</div>
                </div>
                <div class="layer-bar">
                  <div class="layer-bar-fill" style="width: 4%; background: #95a5a6"></div>
                </div>
              </div>
              <div class="layer-item">
                <div class="layer-dot" style="background: #f39c12"></div>
                <div class="layer-info">
                  <div class="layer-name">Shared</div>
                  <div class="layer-count">1 modules</div>
                </div>
                <div class="layer-bar">
                  <div class="layer-bar-fill" style="width: 4%; background: #f39c12"></div>
                </div>
              </div>
            
              <div class="layer-item" style="opacity: 0.6">
                <div class="layer-dot" style="background: var(--text-muted)"></div>
                <div class="layer-info">
                  <div class="layer-name">+ 1 more layers</div>
                </div>
              </div>
            
          </div>
        </div>
      </div>

      <!-- Top Modules by Dependencies -->
      <div class="col-6 card fade-in stagger-5">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: var(--warning-bg); color: var(--warning)">üéØ</span>
            Top Connected Modules
          </div>
          <span class="card-badge" style="background: var(--warning-bg); color: var(--warning)">Hot spots</span>
        </div>
        <div class="modules-list">
          
            <div class="module-item">
              <div class="module-rank">1</div>
              <div class="module-info">
                <div class="module-name">types</div>
                <div class="module-path">src/types/index.ts</div>
              </div>
              <div class="module-deps">
                <div class="module-deps-value">22</div>
                <div class="module-deps-label">deps</div>
              </div>
            </div>
          
            <div class="module-item">
              <div class="module-rank">2</div>
              <div class="module-info">
                <div class="module-name">logger</div>
                <div class="module-path">src/utils/logger.ts</div>
              </div>
              <div class="module-deps">
                <div class="module-deps-value">14</div>
                <div class="module-deps-label">deps</div>
              </div>
            </div>
          
            <div class="module-item">
              <div class="module-rank">3</div>
              <div class="module-info">
                <div class="module-name">analyzers</div>
                <div class="module-path">src/analyzers/index.ts</div>
              </div>
              <div class="module-deps">
                <div class="module-deps-value">11</div>
                <div class="module-deps-label">deps</div>
              </div>
            </div>
          
            <div class="module-item">
              <div class="module-rank">4</div>
              <div class="module-info">
                <div class="module-name">generators</div>
                <div class="module-path">src/generators/index.ts</div>
              </div>
              <div class="module-deps">
                <div class="module-deps-value">11</div>
                <div class="module-deps-label">deps</div>
              </div>
            </div>
          
            <div class="module-item">
              <div class="module-rank">5</div>
              <div class="module-info">
                <div class="module-name">parsers</div>
                <div class="module-path">src/parsers/index.ts</div>
              </div>
              <div class="module-deps">
                <div class="module-deps-value">11</div>
                <div class="module-deps-label">deps</div>
              </div>
            </div>
          
        </div>
      </div>

      <!-- Recommendations -->
      
      <div class="col-6 card fade-in">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: var(--warning-bg); color: var(--warning)">üí°</span>
            Recommendations
          </div>
          <span class="card-badge" style="background: var(--warning-bg); color: var(--warning)">3 items</span>
        </div>
        <div class="recommendations-list">
          
            <div class="recommendation-item critical">
              <span class="recommendation-icon">üî¥</span>
              <span class="recommendation-text">Fix 1 circular dependency chain(s)</span>
            </div>
            <div class="recommendation-item warning">
              <span class="recommendation-icon">üü°</span>
              <span class="recommendation-text">5 orphan module(s) found</span>
            </div>
            <div class="recommendation-item warning">
              <span class="recommendation-icon">üü°</span>
              <span class="recommendation-text">Some modules have too many dependents</span>
            </div>
        </div>
      </div>
      

      <!-- Circular Dependencies Preview -->
      
      <div class="col-6 card fade-in">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: var(--danger-bg); color: var(--danger)">‚ö†Ô∏è</span>
            Circular Dependencies
          </div>
          <span class="card-badge" style="background: var(--danger-bg); color: var(--danger)">1 found</span>
        </div>
        <div class="circular-deps-list">
          
            <div class="circular-dep-item">
              
                <span class="circular-dep-node">web.ts</span>
                <span class="circular-dep-arrow">‚Üí</span>
              
                <span class="circular-dep-node">index.ts</span>
                <span class="circular-dep-arrow">‚Üí</span>
              
                <span class="circular-dep-node">web.ts</span>
                
              
              <span class="circular-dep-arrow">‚Ü©</span>
            </div>
          
          
        </div>
      </div>
      

      <!-- Dependency Graph - D3.js Force-Directed -->
      
      <div class="col-12 card diagram-card fade-in">
        <div class="card-header">
          <div class="card-title">
            <span class="card-icon" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2)); color: var(--accent-primary)">üó∫Ô∏è</span>
            Architecture Overview
          </div>
          <span class="card-badge" style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2)); color: var(--accent-primary)">Interactive</span>
        </div>
        <div class="graph-container">
          <div class="graph-controls">
            <button class="graph-btn" onclick="zoomIn()" title="Zoom In">+</button>
            <button class="graph-btn" onclick="zoomOut()" title="Zoom Out">‚àí</button>
            <button class="graph-btn" onclick="resetZoom()" title="Reset">‚ü≤</button>
          </div>
          <svg id="graphSvg" class="graph-svg"></svg>
          <div class="graph-legend">
            
              <div class="graph-legend-item">
                <div class="graph-legend-dot" style="background: #2ecc71"></div>
                <span>Cli</span>
              </div>
            
              <div class="graph-legend-item">
                <div class="graph-legend-dot" style="background: #bdc3c7"></div>
                <span>Root</span>
              </div>
            
              <div class="graph-legend-item">
                <div class="graph-legend-dot" style="background: #bdc3c7"></div>
                <span>Vscode Extension</span>
              </div>
            
              <div class="graph-legend-item">
                <div class="graph-legend-dot" style="background: #bdc3c7"></div>
                <span>Src</span>
              </div>
            
              <div class="graph-legend-item">
                <div class="graph-legend-dot" style="background: #95a5a6"></div>
                <span>Config</span>
              </div>
            
              <div class="graph-legend-item">
                <div class="graph-legend-dot" style="background: #f39c12"></div>
                <span>Shared</span>
              </div>
            
          </div>
        </div>
      </div>
      

    </div>

    <!-- Footer -->
    <footer class="footer fade-in">
      <div class="footer-brand">
        <span>üèóÔ∏è</span>
        <span>Powered by <a href="https://github.com/ThanhNguyxn/ArchPulse" target="_blank" rel="noopener">ArchPulse</a> v0.5.0</span>
      </div>
      <div class="footer-links">
        <a href="https://github.com/ThanhNguyxn/ArchPulse" target="_blank" rel="noopener">GitHub</a>
        <a href="https://github.com/ThanhNguyxn/ArchPulse/issues" target="_blank" rel="noopener">Report Issue</a>
        <a href="https://github.com/ThanhNguyxn/ArchPulse#readme" target="_blank" rel="noopener">Documentation</a>
      </div>
    </footer>
  </div>

  <script>
    // Theme Toggle
    function toggleTheme() {
      const html = document.documentElement;
      const icon = document.getElementById('themeIcon');
      if (html.classList.contains('dark') || !html.classList.contains('light')) {
        html.classList.remove('dark');
        html.classList.add('light');
        icon.textContent = '‚òÄÔ∏è';
      } else {
        html.classList.remove('light');
        html.classList.add('dark');
        icon.textContent = 'üåô';
      }
    }

    // Auto detect theme preference
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
      document.documentElement.classList.add('light');
      document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
    }

    // Layer Distribution Chart
    const layerCtx = document.getElementById('layerChart');
    if (layerCtx) {
      new Chart(layerCtx.getContext('2d'), {
        type: 'doughnut',
        data: {
          labels: ["Cli","Root","Vscode Extension","Src","Config","Shared","Types"],
          datasets: [{
            data: [3,1,8,31,1,1,1],
            backgroundColor: ["#2ecc71","#bdc3c7","#bdc3c7","#bdc3c7","#95a5a6","#f39c12","#34495e"],
            borderWidth: 0,
            hoverOffset: 8
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          cutout: '65%',
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: 'rgba(15, 15, 35, 0.9)',
              titleColor: '#fff',
              bodyColor: '#a1a1aa',
              borderColor: 'rgba(255, 255, 255, 0.1)',
              borderWidth: 1,
              padding: 12,
              cornerRadius: 8,
              displayColors: true,
              boxPadding: 4
            }
          }
        }
      });
    }

    // D3.js Force-Directed Graph
    const graphData = {
      nodes: [{"id":"src/types/index.ts","name":"types","layer":"Types","color":"#34495e","deps":22},{"id":"src/utils/logger.ts","name":"logger","layer":"Shared","color":"#f39c12","deps":14},{"id":"src/analyzers/index.ts","name":"analyzers","layer":"Src","color":"#bdc3c7","deps":11},{"id":"src/generators/index.ts","name":"generators","layer":"Src","color":"#bdc3c7","deps":11},{"id":"src/parsers/index.ts","name":"parsers","layer":"Src","color":"#bdc3c7","deps":11},{"id":"src/config/loader.ts","name":"loader","layer":"Config","color":"#95a5a6","deps":8},{"id":"src/cli/commands/generate.ts","name":"generate","layer":"Cli","color":"#2ecc71","deps":7},{"id":"src/index.ts","name":"src","layer":"Src","color":"#bdc3c7","deps":6},{"id":"src/parsers/base.ts","name":"base","layer":"Src","color":"#bdc3c7","deps":6},{"id":"vscode-extension/src/extension.ts","name":"extension","layer":"Vscode Extension","color":"#bdc3c7","deps":6},{"id":"src/actions/index.ts","name":"actions","layer":"Src","color":"#bdc3c7","deps":5},{"id":"src/cli/index.ts","name":"cli","layer":"Cli","color":"#2ecc71","deps":5},{"id":"src/__fixtures__/sample-ts/services/userService.ts","name":"userService","layer":"Src","color":"#bdc3c7","deps":5},{"id":"src/cli/watcher.ts","name":"watcher","layer":"Cli","color":"#2ecc71","deps":4},{"id":"src/analyzers/scanner.ts","name":"scanner","layer":"Src","color":"#bdc3c7","deps":4},{"id":"src/generators/layout.ts","name":"layout","layer":"Src","color":"#bdc3c7","deps":4},{"id":"src/dashboard/web.ts","name":"web","layer":"Src","color":"#bdc3c7","deps":4},{"id":"src/actions/comment.ts","name":"comment","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/analyzers/graph.ts","name":"graph","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/analyzers/layers.ts","name":"layers","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/generators/drawio.ts","name":"drawio","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/generators/png.ts","name":"png","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/generators/svg.ts","name":"svg","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/dashboard/index.ts","name":"dashboard","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/parsers/go.ts","name":"go","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/parsers/java.ts","name":"java","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/parsers/python.ts","name":"python","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/parsers/typescript.ts","name":"typescript","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/__fixtures__/sample-ts/controllers/userController.ts","name":"userController","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/__fixtures__/sample-ts/types/index.ts","name":"types","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/__fixtures__/sample-ts/shared/database.ts","name":"database","layer":"Src","color":"#bdc3c7","deps":3},{"id":"src/generators/c4.ts","name":"c4","layer":"Src","color":"#bdc3c7","deps":2},{"id":"vscode-extension/src/statusBar.ts","name":"statusBar","layer":"Vscode Extension","color":"#bdc3c7","deps":2},{"id":"vscode-extension/src/commands/analyzeHealth.ts","name":"analyzeHealth","layer":"Vscode Extension","color":"#bdc3c7","deps":2},{"id":"src/actions/diff.ts","name":"diff","layer":"Src","color":"#bdc3c7","deps":1},{"id":"vscode-extension/src/fileWatcher.ts","name":"fileWatcher","layer":"Vscode Extension","color":"#bdc3c7","deps":1},{"id":"vscode-extension/src/commands/generateDiagram.ts","name":"generateDiagram","layer":"Vscode Extension","color":"#bdc3c7","deps":1},{"id":"vscode-extension/src/views/architectureTree.ts","name":"architectureTree","layer":"Vscode Extension","color":"#bdc3c7","deps":1},{"id":"vscode-extension/src/panels/diagramPreview.ts","name":"diagramPreview","layer":"Vscode Extension","color":"#bdc3c7","deps":1},{"id":"src/__fixtures__/sample-ts/shared/logger.ts","name":"logger","layer":"Src","color":"#bdc3c7","deps":1}],
      links: [{"source":"src/index.ts","target":"src/types/index.ts"},{"source":"src/index.ts","target":"src/analyzers/index.ts"},{"source":"src/index.ts","target":"src/generators/index.ts"},{"source":"src/index.ts","target":"src/config/loader.ts"},{"source":"src/index.ts","target":"src/parsers/index.ts"},{"source":"src/index.ts","target":"src/utils/logger.ts"},{"source":"src/actions/comment.ts","target":"src/types/index.ts"},{"source":"src/actions/comment.ts","target":"src/generators/index.ts"},{"source":"src/actions/index.ts","target":"src/analyzers/index.ts"},{"source":"src/actions/index.ts","target":"src/generators/index.ts"},{"source":"src/actions/index.ts","target":"src/config/loader.ts"},{"source":"src/actions/index.ts","target":"src/actions/comment.ts"},{"source":"src/actions/index.ts","target":"src/actions/diff.ts"},{"source":"src/cli/index.ts","target":"src/cli/commands/generate.ts"},{"source":"src/cli/index.ts","target":"src/config/loader.ts"},{"source":"src/cli/index.ts","target":"src/utils/logger.ts"},{"source":"src/cli/index.ts","target":"src/analyzers/index.ts"},{"source":"src/cli/index.ts","target":"src/dashboard/web.ts"},{"source":"src/cli/watcher.ts","target":"src/config/loader.ts"},{"source":"src/cli/watcher.ts","target":"src/parsers/index.ts"},{"source":"src/cli/watcher.ts","target":"src/utils/logger.ts"},{"source":"src/analyzers/graph.ts","target":"src/types/index.ts"},{"source":"src/analyzers/graph.ts","target":"src/utils/logger.ts"},{"source":"src/analyzers/index.ts","target":"src/types/index.ts"},{"source":"src/analyzers/index.ts","target":"src/config/loader.ts"},{"source":"src/analyzers/index.ts","target":"src/parsers/index.ts"},{"source":"src/analyzers/index.ts","target":"src/analyzers/scanner.ts"},{"source":"src/analyzers/index.ts","target":"src/analyzers/graph.ts"},{"source":"src/analyzers/index.ts","target":"src/analyzers/layers.ts"},{"source":"src/analyzers/index.ts","target":"src/utils/logger.ts"},{"source":"src/analyzers/layers.ts","target":"src/types/index.ts"},{"source":"src/analyzers/layers.ts","target":"src/utils/logger.ts"},{"source":"src/analyzers/scanner.ts","target":"src/types/index.ts"},{"source":"src/analyzers/scanner.ts","target":"src/utils/logger.ts"},{"source":"src/analyzers/scanner.ts","target":"src/parsers/index.ts"},{"source":"src/config/loader.ts","target":"src/types/index.ts"},{"source":"src/config/loader.ts","target":"src/utils/logger.ts"},{"source":"src/generators/c4.ts","target":"src/types/index.ts"},{"source":"src/generators/drawio.ts","target":"src/types/index.ts"},{"source":"src/generators/drawio.ts","target":"src/generators/layout.ts"},{"source":"src/generators/index.ts","target":"src/types/index.ts"},{"source":"src/generators/index.ts","target":"src/generators/drawio.ts"},{"source":"src/generators/index.ts","target":"src/generators/png.ts"},{"source":"src/generators/index.ts","target":"src/generators/svg.ts"},{"source":"src/generators/index.ts","target":"src/generators/c4.ts"},{"source":"src/generators/index.ts","target":"src/utils/logger.ts"},{"source":"src/generators/index.ts","target":"src/generators/layout.ts"},{"source":"src/generators/layout.ts","target":"src/types/index.ts"},{"source":"src/generators/layout.ts","target":"src/utils/logger.ts"},{"source":"src/generators/png.ts","target":"src/types/index.ts"},{"source":"src/generators/png.ts","target":"src/utils/logger.ts"},{"source":"src/generators/svg.ts","target":"src/types/index.ts"},{"source":"src/generators/svg.ts","target":"src/utils/logger.ts"},{"source":"src/dashboard/index.ts","target":"src/types/index.ts"},{"source":"src/dashboard/index.ts","target":"src/dashboard/web.ts"},{"source":"src/dashboard/web.ts","target":"src/types/index.ts"},{"source":"src/dashboard/web.ts","target":"src/dashboard/index.ts"},{"source":"src/parsers/base.ts","target":"src/types/index.ts"},{"source":"src/parsers/go.ts","target":"src/parsers/base.ts"},{"source":"src/parsers/go.ts","target":"src/types/index.ts"},{"source":"src/parsers/index.ts","target":"src/parsers/base.ts"},{"source":"src/parsers/index.ts","target":"src/parsers/typescript.ts"},{"source":"src/parsers/index.ts","target":"src/parsers/python.ts"},{"source":"src/parsers/index.ts","target":"src/parsers/java.ts"},{"source":"src/parsers/index.ts","target":"src/parsers/go.ts"},{"source":"src/parsers/index.ts","target":"src/types/index.ts"},{"source":"src/parsers/index.ts","target":"src/utils/logger.ts"},{"source":"src/parsers/java.ts","target":"src/parsers/base.ts"},{"source":"src/parsers/java.ts","target":"src/types/index.ts"},{"source":"src/parsers/python.ts","target":"src/types/index.ts"},{"source":"src/parsers/python.ts","target":"src/parsers/base.ts"},{"source":"src/parsers/typescript.ts","target":"src/types/index.ts"},{"source":"src/parsers/typescript.ts","target":"src/parsers/base.ts"},{"source":"vscode-extension/src/extension.ts","target":"vscode-extension/src/commands/generateDiagram.ts"},{"source":"vscode-extension/src/extension.ts","target":"vscode-extension/src/commands/analyzeHealth.ts"},{"source":"vscode-extension/src/extension.ts","target":"vscode-extension/src/panels/diagramPreview.ts"},{"source":"vscode-extension/src/extension.ts","target":"vscode-extension/src/views/architectureTree.ts"},{"source":"vscode-extension/src/extension.ts","target":"vscode-extension/src/statusBar.ts"},{"source":"vscode-extension/src/extension.ts","target":"vscode-extension/src/fileWatcher.ts"},{"source":"src/cli/commands/generate.ts","target":"src/types/index.ts"},{"source":"src/cli/commands/generate.ts","target":"src/config/loader.ts"},{"source":"src/cli/commands/generate.ts","target":"src/analyzers/index.ts"},{"source":"src/cli/commands/generate.ts","target":"src/generators/index.ts"},{"source":"src/cli/commands/generate.ts","target":"src/utils/logger.ts"},{"source":"src/cli/commands/generate.ts","target":"src/cli/watcher.ts"},{"source":"vscode-extension/src/commands/analyzeHealth.ts","target":"vscode-extension/src/statusBar.ts"},{"source":"src/__fixtures__/sample-ts/controllers/userController.ts","target":"src/__fixtures__/sample-ts/services/userService.ts"},{"source":"src/__fixtures__/sample-ts/controllers/userController.ts","target":"src/__fixtures__/sample-ts/shared/database.ts"},{"source":"src/__fixtures__/sample-ts/controllers/userController.ts","target":"src/__fixtures__/sample-ts/types/index.ts"},{"source":"src/__fixtures__/sample-ts/shared/database.ts","target":"src/__fixtures__/sample-ts/types/index.ts"},{"source":"src/__fixtures__/sample-ts/services/userService.ts","target":"src/__fixtures__/sample-ts/shared/database.ts"},{"source":"src/__fixtures__/sample-ts/services/userService.ts","target":"src/__fixtures__/sample-ts/shared/logger.ts"},{"source":"src/__fixtures__/sample-ts/services/userService.ts","target":"src/__fixtures__/sample-ts/types/index.ts"}]
    };

    if (graphData && document.getElementById('graphSvg')) {
      initGraph(graphData);
    }

    let currentTransform = d3.zoomIdentity;
    let svg, g, zoom;

    function initGraph(data) {
      const container = document.getElementById('graphSvg');
      const width = container.clientWidth || 1200;
      const height = 500;

      svg = d3.select('#graphSvg')
        .attr('viewBox', [0, 0, width, height]);

      // Clear previous content
      svg.selectAll('*').remove();

      // Gradient definitions
      const defs = svg.append('defs');
      
      // Arrow marker
      defs.append('marker')
        .attr('id', 'arrowhead')
        .attr('viewBox', '-0 -5 10 10')
        .attr('refX', 20)
        .attr('refY', 0)
        .attr('orient', 'auto')
        .attr('markerWidth', 6)
        .attr('markerHeight', 6)
        .append('path')
        .attr('d', 'M 0,-5 L 10,0 L 0,5')
        .attr('fill', 'rgba(139, 92, 246, 0.5)');

      // Container group for zoom/pan
      g = svg.append('g');

      // Zoom behavior
      zoom = d3.zoom()
        .scaleExtent([0.3, 3])
        .on('zoom', (event) => {
          currentTransform = event.transform;
          g.attr('transform', event.transform);
        });

      svg.call(zoom);

      // Force simulation
      const simulation = d3.forceSimulation(data.nodes)
        .force('link', d3.forceLink(data.links).id(d => d.id).distance(80))
        .force('charge', d3.forceManyBody().strength(-200))
        .force('center', d3.forceCenter(width / 2, height / 2))
        .force('collision', d3.forceCollide().radius(30));

      // Links
      const link = g.append('g')
        .attr('class', 'links')
        .selectAll('line')
        .data(data.links)
        .join('line')
        .attr('class', 'link')
        .attr('marker-end', 'url(#arrowhead)');

      // Node groups
      const node = g.append('g')
        .attr('class', 'nodes')
        .selectAll('g')
        .data(data.nodes)
        .join('g')
        .attr('class', 'node')
        .style('cursor', 'pointer')
        .call(d3.drag()
          .on('start', dragstarted)
          .on('drag', dragged)
          .on('end', dragended));

      // Node circles
      node.append('circle')
        .attr('r', d => 8 + Math.min(d.deps * 0.5, 12))
        .attr('fill', d => d.color)
        .attr('stroke', 'rgba(255, 255, 255, 0.3)')
        .attr('stroke-width', 2)
        .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))');

      // Node labels
      node.append('text')
        .attr('class', 'node-label')
        .attr('dy', d => 20 + Math.min(d.deps * 0.5, 12))
        .text(d => d.name.length > 12 ? d.name.slice(0, 10) + '...' : d.name);

      // Tooltip on hover
      node.append('title')
        .text(d => d.name + '\n' + d.layer + '\nDependencies: ' + d.deps);

      // Simulation tick
      simulation.on('tick', () => {
        link
          .attr('x1', d => d.source.x)
          .attr('y1', d => d.source.y)
          .attr('x2', d => d.target.x)
          .attr('y2', d => d.target.y);

        node.attr('transform', d => 'translate(' + d.x + ',' + d.y + ')');
      });

      function dragstarted(event, d) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x;
        d.fy = d.y;
      }

      function dragged(event, d) {
        d.fx = event.x;
        d.fy = event.y;
      }

      function dragended(event, d) {
        if (!event.active) simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
      }
    }

    function zoomIn() {
      svg.transition().call(zoom.scaleBy, 1.3);
    }

    function zoomOut() {
      svg.transition().call(zoom.scaleBy, 0.7);
    }

    function resetZoom() {
      svg.transition().call(zoom.transform, d3.zoomIdentity);
    }
  </script>
</body>
</html>